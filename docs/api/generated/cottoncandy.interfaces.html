<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>interfaces &mdash; cottoncandy documentation</title>
    
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-3.3.4/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-3.3.4/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.3.4/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="cottoncandy documentation" href="../../index.html" />
    <link rel="up" title="cottoncandy docs" href="../index.html" />
    <link rel="next" title="utils" href="cottoncandy.utils.html" />
    <link rel="prev" title="browser" href="cottoncandy.browser.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html">
          cottoncandy</a>
        <span class="navbar-text navbar-version pull-left"><b>0.01a</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">cottoncandy docs</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">interfaces</a><ul>
<li><a class="reference internal" href="#module-interfaces">Module: <code class="docutils literal"><span class="pre">interfaces</span></code></a></li>
<li><a class="reference internal" href="#classes">Classes</a><ul>
<li><a class="reference internal" href="#arrayinterface"><code class="docutils literal"><span class="pre">ArrayInterface</span></code></a></li>
<li><a class="reference internal" href="#basicinterface"><code class="docutils literal"><span class="pre">BasicInterface</span></code></a></li>
<li><a class="reference internal" href="#defaultinterface"><code class="docutils literal"><span class="pre">DefaultInterface</span></code></a></li>
<li><a class="reference internal" href="#filesysteminterface"><code class="docutils literal"><span class="pre">FileSystemInterface</span></code></a></li>
<li><a class="reference internal" href="#interfaceobject"><code class="docutils literal"><span class="pre">InterfaceObject</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="cottoncandy.browser.html" title="Previous Chapter: browser"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; browser</span>
    </a>
  </li>
  <li>
    <a href="cottoncandy.utils.html" title="Next Chapter: utils"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">utils &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../../_sources/api/generated/cottoncandy.interfaces.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="interfaces">
<h1>interfaces<a class="headerlink" href="#interfaces" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-interfaces">
<h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">interfaces</span></code><a class="headerlink" href="#module-interfaces" title="Permalink to this headline">¶</a></h2>
<p>Inheritance diagram for <code class="docutils literal"><span class="pre">cottoncandy.interfaces</span></code>:</p>
<p class="graphviz">
<img src="../../_images/inheritance-9999d9106254960e5b0d606b2e2e047eba53bd26.png" alt="Inheritance diagram of cottoncandy.interfaces" usemap="#inheritancea69b3fcd6d" class="inheritance"/>
<map id="inheritancea69b3fcd6d" name="inheritancea69b3fcd6d">
<area shape="rect" id="node1" href="#cottoncandy.interfaces.ArrayInterface" target="_top" title="Provides numpy.array concepts." alt="" coords="402,4,551,25"/>
<area shape="rect" id="node4" href="#cottoncandy.interfaces.DefaultInterface" target="_top" title="Default cottoncandy interface to S3" alt="" coords="605,46,764,68"/>
<area shape="rect" id="node2" href="#cottoncandy.interfaces.BasicInterface" target="_top" title="Basic cottoncandy interface to S3." alt="" coords="199,46,347,68"/>
<area shape="rect" id="node5" href="#cottoncandy.interfaces.FileSystemInterface" target="_top" title="Emulate some file system functionality." alt="" coords="387,89,565,110"/>
<area shape="rect" id="node3" href="#cottoncandy.interfaces.InterfaceObject" target="_top" title="interfaces.InterfaceObject" alt="" coords="4,46,159,68"/>
</map>
</p>
<span class="target" id="module-cottoncandy.interfaces"></span></div>
<div class="section" id="classes">
<h2>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="arrayinterface">
<h3><a class="reference internal" href="#cottoncandy.interfaces.ArrayInterface" title="cottoncandy.interfaces.ArrayInterface"><code class="xref py py-class docutils literal"><span class="pre">ArrayInterface</span></code></a><a class="headerlink" href="#arrayinterface" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="cottoncandy.interfaces.ArrayInterface">
<em class="property">class </em><code class="descclassname">cottoncandy.interfaces.</code><code class="descname">ArrayInterface</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.ArrayInterface" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cottoncandy.interfaces.BasicInterface" title="cottoncandy.interfaces.BasicInterface"><code class="xref py py-class docutils literal"><span class="pre">cottoncandy.interfaces.BasicInterface</span></code></a></p>
<p>Provides numpy.array concepts.</p>
<p class="rubric">Methods</p>
<dl class="method">
<dt id="cottoncandy.interfaces.ArrayInterface.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.ArrayInterface.__init__" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>bucket_name</strong> : str</p>
<blockquote>
<div><p>Bucket to use</p>
</div></blockquote>
<p><strong>ACCESS_KEY</strong> : str</p>
<blockquote>
<div><p>The S3 access key</p>
</div></blockquote>
<p><strong>SECRET_KEY</strong> : str</p>
<blockquote>
<div><p>The S3 secret key</p>
</div></blockquote>
<p><strong>url</strong> : str</p>
<blockquote>
<div><p>The URL for the S3 gateway</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>cci</strong> : ccio</p>
<blockquote class="last">
<div><p>Cottoncandy interface object</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.ArrayInterface.cloud2dataset">
<code class="descname">cloud2dataset</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.ArrayInterface.cloud2dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a dataset representation of the object branch.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_root</strong> : str</p>
<blockquote>
<div><p>The branch to create a dataset from</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>cc_dataset_object</strong> : cottoncandy.BrowserObject</p>
<blockquote class="last">
<div><p>This can be conceptualized as implementing an h5py/pytables
object with <code class="docutils literal"><span class="pre">load()</span></code> and <code class="docutils literal"><span class="pre">keys()</span></code> methods.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.ArrayInterface.cloud2dict">
<code class="descname">cloud2dict</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.ArrayInterface.cloud2dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Download all the arrays of the object branch and return a dictionary.
This is the complement to <code class="docutils literal"><span class="pre">dict2cloud</span></code></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_root</strong> : str</p>
<blockquote>
<div><p>The branch to create the dictionary from</p>
</div></blockquote>
<p><strong>verbose</strong> : bool</p>
<blockquote>
<div><p>Whether to print object_root after completion</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>datadict</strong> : dict</p>
<blockquote class="last">
<div><p>An arbitrary depth dictionary.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.ArrayInterface.connect">
<code class="descname">connect</code><span class="sig-paren">(</span><em>ACCESS_KEY=False</em>, <em>SECRET_KEY=False</em>, <em>url=None</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.ArrayInterface.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect to S3 using boto</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.ArrayInterface.create_bucket">
<code class="descname">create_bucket</code><span class="sig-paren">(</span><em>bucket_name</em>, <em>acl='authenticated-read'</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.ArrayInterface.create_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new bucket</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.ArrayInterface.dict2cloud">
<code class="descname">dict2cloud</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.ArrayInterface.dict2cloud" title="Permalink to this definition">¶</a></dt>
<dd><p>Upload an arbitrary depth dictionary containing arrays</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
<p><strong>array_dict</strong> : dict</p>
<blockquote>
<div><p>An arbitrary depth dictionary of arrays. This can be
conceptualized as implementing an HDF-like group</p>
</div></blockquote>
<p><strong>verbose</strong> : bool</p>
<blockquote class="last">
<div><p>Whether to print object_name after completion</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.ArrayInterface.download_dask_array">
<code class="descname">download_dask_array</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.ArrayInterface.download_dask_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Downloads a split matrix as a <code class="docutils literal"><span class="pre">dask.array.Array</span></code> object</p>
<p>This uses the stored object metadata to reconstruct the full
n-dimensional array uploaded using <code class="docutils literal"><span class="pre">upload_dask_array</span></code>.</p>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">s3_response</span> <span class="o">=</span> <span class="n">cci</span><span class="o">.</span><span class="n">upload_dask_array</span><span class="p">(</span><span class="s1">&#39;test_dim&#39;</span><span class="p">,</span> <span class="n">arr</span><span class="p">,</span> <span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dask_object</span> <span class="o">=</span> <span class="n">cci</span><span class="o">.</span><span class="n">download_dask_array</span><span class="p">(</span><span class="s1">&#39;test_dim&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dask_object</span>
<span class="go">dask.array&lt;array, shape=(100, 600, 1000), dtype=float64, chunksize=(100, 600, 100)&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dask_slice</span> <span class="o">=</span> <span class="n">dask_object</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="p">:</span><span class="mi">200</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dask_slice</span>
<span class="go">dask.array&lt;getitem..., shape=(100, 600, 1000), dtype=float64, chunksize=(100, 600, 100)&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">downloaded_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">dask_slice</span><span class="p">)</span> <span class="c1"># this downloads the array</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">downloaded_data</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(100, 600, 200)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.ArrayInterface.download_json">
<code class="descname">download_json</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.ArrayInterface.download_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Download a JSON object</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>json_data</strong> : dict</p>
<blockquote class="last">
<div><p>Dictionary representation of JSON file</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.ArrayInterface.download_npy_array">
<code class="descname">download_npy_array</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.ArrayInterface.download_npy_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Download a np.ndarray uploaded using <code class="docutils literal"><span class="pre">np.save</span></code> with <code class="docutils literal"><span class="pre">np.load</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>object_name</strong> : str</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>array</strong> : np.ndarray</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.ArrayInterface.download_object">
<code class="descname">download_object</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.ArrayInterface.download_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Download object raw data.
This simply calls the object body <code class="docutils literal"><span class="pre">read()</span></code> method.</p>
<p>object_name : str</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>byte_data</strong> : str</p>
<blockquote class="last">
<div><p>Object byte contents</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.ArrayInterface.download_pickle">
<code class="descname">download_pickle</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.ArrayInterface.download_pickle" title="Permalink to this definition">¶</a></dt>
<dd><p>Download a cPickle object</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>object_name</strong> : str</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>data_object</strong> : object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.ArrayInterface.download_raw_array">
<code class="descname">download_raw_array</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.ArrayInterface.download_raw_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Download a binary np.ndarray and return an np.ndarray object
This method downloads an array without any disk or memory overhead.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
<p><strong>buffersize</strong> : optional</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>array</strong> : np.ndarray</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>The object must have metadata containing: shape, dtype and a gzip
boolean flag. This is all automatically handled by <code class="docutils literal"><span class="pre">upload_raw_array</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.ArrayInterface.download_sparse_array">
<code class="descname">download_sparse_array</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.ArrayInterface.download_sparse_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Downloads a scipy.sparse array</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
<blockquote>
<div><p>The object name for the sparse array to be retrieved.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>arr</strong> : scipy.sparse.spmatrix</p>
<blockquote class="last">
<div><p>The array stored at the location given by object_name</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.ArrayInterface.download_to_file">
<code class="descname">download_to_file</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.ArrayInterface.download_to_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Download S3 object to a file</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
<p><strong>flname</strong> : str</p>
<blockquote class="last">
<div><p>Absolute path where the data will be downloaded on disk</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.ArrayInterface.exists_bucket">
<code class="descname">exists_bucket</code><span class="sig-paren">(</span><em>bucket_name</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.ArrayInterface.exists_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether the bucket exists</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.ArrayInterface.exists_object">
<code class="descname">exists_object</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.ArrayInterface.exists_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether object exists in bucket</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
<blockquote class="last">
<div><p>The object name</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.ArrayInterface.get_bucket">
<code class="descname">get_bucket</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.ArrayInterface.get_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Get bucket boto3 object</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.ArrayInterface.get_bucket_objects">
<code class="descname">get_bucket_objects</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.ArrayInterface.get_bucket_objects" title="Permalink to this definition">¶</a></dt>
<dd><p>Get list of objects from the bucket
This is a wrapper to <code class="docutils literal"><span class="pre">self.get_bucket().bucket.objects</span></code></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>limit</strong> : int, 1000</p>
<blockquote>
<div><p>Maximum number of items to return</p>
</div></blockquote>
<p><strong>page_size</strong> : int, 1000</p>
<blockquote>
<div><p>The page size for pagination</p>
</div></blockquote>
<p><strong>filter</strong> : dict</p>
<blockquote>
<div><p>A dictionary with key &#8216;Prefix&#8217;, specifying a prefix
string.  Only return objects matching this string.
Defaults to &#8216;/&#8217;, all objects.</p>
</div></blockquote>
<p><strong>kwargs</strong> : optional</p>
<blockquote class="last">
<div><p>Dictionary of {method:value} for <code class="docutils literal"><span class="pre">bucket.objects</span></code></p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>If you get a &#8216;PaginationError&#8217;, this means you have
a lot of items on your bucket and should increase <code class="docutils literal"><span class="pre">page_size</span></code></p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.ArrayInterface.get_bucket_size">
<code class="descname">get_bucket_size</code><span class="sig-paren">(</span><em>limit=1000000</em>, <em>page_size=1000000</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.ArrayInterface.get_bucket_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Counts the size of all objects in the current bucket.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>limit</strong> : int, 1000</p>
<blockquote>
<div><p>Maximum number of items to return</p>
</div></blockquote>
<p><strong>page_size</strong> : int, 1000</p>
<blockquote>
<div><p>The page size for pagination</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>total_bytes</strong> : int</p>
<blockquote class="last">
<div><p>The byte count of all objects in the bucket.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Because paging does not work properly, if there are more than
limit,page_size number of objects in the bucket, this function will
underestimate the total size. Check the printed number of objects for
suspicious round numbers.
TODO(anunez): Remove this note when the bug is fixed.</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.ArrayInterface.get_object">
<code class="descname">get_object</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.ArrayInterface.get_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a boto3 object. Create it if it doesn&#8217;t exist</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.ArrayInterface.mpu_fileobject">
<code class="descname">mpu_fileobject</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.ArrayInterface.mpu_fileobject" title="Permalink to this definition">¶</a></dt>
<dd><p>Multi-part upload for a python file-object.</p>
<p>This automatically creates a multipart upload of an object.
Useful for large objects that are loaded in memory. This avoids
having to write the file to disk and then using <code class="docutils literal"><span class="pre">upload_from_file</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
<p><strong>file_object :</strong></p>
<blockquote>
<div><p>file-like python object (e.g. StringIO, file, etc)</p>
</div></blockquote>
<p><strong>buffersize</strong> : int</p>
<blockquote>
<div><p>Byte size of the individual parts to create.
Defaults to 100MB</p>
</div></blockquote>
<p><strong>verbose</strong> : bool</p>
<blockquote>
<div><p>verbosity flag of whether to print mpu information to stdout</p>
</div></blockquote>
<p><strong>**metadata</strong> : optional</p>
<blockquote class="last">
<div><p>Metadata to store along with MPU object</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.ArrayInterface.pathjoin">
<code class="descname">pathjoin</code><span class="sig-paren">(</span><em>a</em>, <em>*p</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.ArrayInterface.pathjoin" title="Permalink to this definition">¶</a></dt>
<dd><p>Join two or more pathname components, inserting SEPARATOR as needed.
If any component is an absolute path, all previous path components
will be discarded.  An empty last part will result in a path that
ends with a separator.</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.ArrayInterface.set_bucket">
<code class="descname">set_bucket</code><span class="sig-paren">(</span><em>bucket_name</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.ArrayInterface.set_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Bucket to use</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.ArrayInterface.show_buckets">
<code class="descname">show_buckets</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.ArrayInterface.show_buckets" title="Permalink to this definition">¶</a></dt>
<dd><p>Show available buckets</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.ArrayInterface.show_objects">
<code class="descname">show_objects</code><span class="sig-paren">(</span><em>limit=1000</em>, <em>page_size=1000</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.ArrayInterface.show_objects" title="Permalink to this definition">¶</a></dt>
<dd><p>Print objects in the current bucket</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.ArrayInterface.upload_dask_array">
<code class="descname">upload_dask_array</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.ArrayInterface.upload_dask_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Upload an array in chunks and store the metadata to reconstruct
the complete matrix with <code class="docutils literal"><span class="pre">dask</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
<p><strong>arr</strong> : np.ndarray</p>
<p><strong>axis</strong> : int or None (default: -1)</p>
<blockquote>
<div><p>The axis along which to slice the array. If None is given,
the array is chunked into ideal isotropic voxels.
<code class="docutils literal"><span class="pre">axis=None</span></code> is WIP and atm works fine for near isotropic matrices</p>
</div></blockquote>
<p><strong>buffersize</strong> : scalar (default: 100MB)</p>
<blockquote>
<div><p>Byte size of the desired array chunks</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>response</strong> : boto3 response</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Each array chunk is uploaded as a raw np.array with the prefix &#8220;pt%04i&#8221;.
The metadata is stored as a json file <code class="docutils literal"><span class="pre">metadata.json</span></code>. For example, if
an array is uploaded with the name &#8220;my_array_name&#8221; and split into 2 parts,
the following objects are created:</p>
<ul class="simple">
<li>my_array_name/pt0000</li>
<li>my_array_name/pt0001</li>
<li>my_array_name/metadata.json</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.ArrayInterface.upload_from_file">
<code class="descname">upload_from_file</code><span class="sig-paren">(</span><em>flname</em>, <em>object_name=None</em>, <em>ExtraArgs={'ACL': 'authenticated-read'}</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.ArrayInterface.upload_from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Upload a file to S3.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>flname</strong> : str</p>
<blockquote>
<div><p>Absolute path of file to upload</p>
</div></blockquote>
<p><strong>object_name</strong> : str, None</p>
<blockquote>
<div><p>Name of uploaded object. If None, use
the full file name as the object name.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>response</strong> : boto3 response</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.ArrayInterface.upload_json">
<code class="descname">upload_json</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.ArrayInterface.upload_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Upload a dict as a JSON using <code class="docutils literal"><span class="pre">json.dumps</span></code></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
<p><strong>ddict</strong> : dict</p>
<p class="last"><strong>metadata</strong> : dict, optional</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.ArrayInterface.upload_npy_array">
<code class="descname">upload_npy_array</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.ArrayInterface.upload_npy_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Upload a np.ndarray using <code class="docutils literal"><span class="pre">np.save</span></code></p>
<p>This method creates a copy of the array in memory
before uploading since it relies on <code class="docutils literal"><span class="pre">np.save</span></code> to
get a byte representation of the array.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
<p><strong>array</strong> : numpy.ndarray</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>reponse</strong> : boto3 upload response</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#cottoncandy.interfaces.ArrayInterface.upload_raw_array" title="cottoncandy.interfaces.ArrayInterface.upload_raw_array"><code class="xref py py-func docutils literal"><span class="pre">upload_raw_array()</span></code></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.ArrayInterface.upload_object">
<code class="descname">upload_object</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.ArrayInterface.upload_object" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.ArrayInterface.upload_pickle">
<code class="descname">upload_pickle</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.ArrayInterface.upload_pickle" title="Permalink to this definition">¶</a></dt>
<dd><p>Upload an object using cPickle: <code class="docutils literal"><span class="pre">cPickle.dumps</span></code></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
<p class="last"><strong>data_object</strong> : object</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.ArrayInterface.upload_raw_array">
<code class="descname">upload_raw_array</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.ArrayInterface.upload_raw_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Upload a a binary representation of a np.ndarray</p>
<p>This method reads the array content from memory to upload.
It does not have any overhead.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
<p><strong>array</strong> : np.ndarray</p>
<p><strong>gzip</strong> : bool, optional</p>
<blockquote>
<div><p>Whether to gzip the array</p>
</div></blockquote>
<p><strong>acl</strong> : str</p>
<blockquote>
<div><p>&#8220;access control list&#8221;, specifies permissions for s3 data.
default is &#8220;authenticated-read&#8221; (authenticated users can read)</p>
</div></blockquote>
<p class="last"><strong>metadata</strong> : dict, optional</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>This method also uploads the array <code class="docutils literal"><span class="pre">dtype</span></code>, <code class="docutils literal"><span class="pre">shape</span></code>, and <code class="docutils literal"><span class="pre">gzip</span></code>
flag as metadata</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.ArrayInterface.upload_sparse_array">
<code class="descname">upload_sparse_array</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.ArrayInterface.upload_sparse_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Uploads a scipy.sparse array as a folder of array objects</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
<blockquote>
<div><p>The name of the object to be stored.</p>
</div></blockquote>
<p><strong>arr</strong> : scipy.sparse.spmatrix</p>
<blockquote class="last">
<div><p>A scipy.sparse array to be saved. If type is DOK or LIL,
it will be converted to csr before saving</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="basicinterface">
<h3><a class="reference internal" href="#cottoncandy.interfaces.BasicInterface" title="cottoncandy.interfaces.BasicInterface"><code class="xref py py-class docutils literal"><span class="pre">BasicInterface</span></code></a><a class="headerlink" href="#basicinterface" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="cottoncandy.interfaces.BasicInterface">
<em class="property">class </em><code class="descclassname">cottoncandy.interfaces.</code><code class="descname">BasicInterface</code><span class="sig-paren">(</span><em>bucket_name</em>, <em>ACCESS_KEY</em>, <em>SECRET_KEY</em>, <em>url</em>, <em>force_bucket_creation=False</em>, <em>verbose=True</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.BasicInterface" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cottoncandy.interfaces.InterfaceObject" title="cottoncandy.interfaces.InterfaceObject"><code class="xref py py-class docutils literal"><span class="pre">cottoncandy.interfaces.InterfaceObject</span></code></a></p>
<p>Basic cottoncandy interface to S3.</p>
<p class="rubric">Methods</p>
<dl class="method">
<dt id="cottoncandy.interfaces.BasicInterface.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>bucket_name</em>, <em>ACCESS_KEY</em>, <em>SECRET_KEY</em>, <em>url</em>, <em>force_bucket_creation=False</em>, <em>verbose=True</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.BasicInterface.__init__" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>bucket_name</strong> : str</p>
<blockquote>
<div><p>Bucket to use</p>
</div></blockquote>
<p><strong>ACCESS_KEY</strong> : str</p>
<blockquote>
<div><p>The S3 access key</p>
</div></blockquote>
<p><strong>SECRET_KEY</strong> : str</p>
<blockquote>
<div><p>The S3 secret key</p>
</div></blockquote>
<p><strong>url</strong> : str</p>
<blockquote>
<div><p>The URL for the S3 gateway</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>cci</strong> : ccio</p>
<blockquote class="last">
<div><p>Cottoncandy interface object</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.BasicInterface.connect">
<code class="descname">connect</code><span class="sig-paren">(</span><em>ACCESS_KEY=False</em>, <em>SECRET_KEY=False</em>, <em>url=None</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.BasicInterface.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect to S3 using boto</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.BasicInterface.create_bucket">
<code class="descname">create_bucket</code><span class="sig-paren">(</span><em>bucket_name</em>, <em>acl='authenticated-read'</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.BasicInterface.create_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new bucket</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.BasicInterface.download_json">
<code class="descname">download_json</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.BasicInterface.download_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Download a JSON object</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>json_data</strong> : dict</p>
<blockquote class="last">
<div><p>Dictionary representation of JSON file</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.BasicInterface.download_object">
<code class="descname">download_object</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.BasicInterface.download_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Download object raw data.
This simply calls the object body <code class="docutils literal"><span class="pre">read()</span></code> method.</p>
<p>object_name : str</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>byte_data</strong> : str</p>
<blockquote class="last">
<div><p>Object byte contents</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.BasicInterface.download_pickle">
<code class="descname">download_pickle</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.BasicInterface.download_pickle" title="Permalink to this definition">¶</a></dt>
<dd><p>Download a cPickle object</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>object_name</strong> : str</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>data_object</strong> : object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.BasicInterface.download_to_file">
<code class="descname">download_to_file</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.BasicInterface.download_to_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Download S3 object to a file</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
<p><strong>flname</strong> : str</p>
<blockquote class="last">
<div><p>Absolute path where the data will be downloaded on disk</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.BasicInterface.exists_bucket">
<code class="descname">exists_bucket</code><span class="sig-paren">(</span><em>bucket_name</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.BasicInterface.exists_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether the bucket exists</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.BasicInterface.exists_object">
<code class="descname">exists_object</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.BasicInterface.exists_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether object exists in bucket</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
<blockquote class="last">
<div><p>The object name</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.BasicInterface.get_bucket">
<code class="descname">get_bucket</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.BasicInterface.get_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Get bucket boto3 object</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.BasicInterface.get_bucket_objects">
<code class="descname">get_bucket_objects</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.BasicInterface.get_bucket_objects" title="Permalink to this definition">¶</a></dt>
<dd><p>Get list of objects from the bucket
This is a wrapper to <code class="docutils literal"><span class="pre">self.get_bucket().bucket.objects</span></code></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>limit</strong> : int, 1000</p>
<blockquote>
<div><p>Maximum number of items to return</p>
</div></blockquote>
<p><strong>page_size</strong> : int, 1000</p>
<blockquote>
<div><p>The page size for pagination</p>
</div></blockquote>
<p><strong>filter</strong> : dict</p>
<blockquote>
<div><p>A dictionary with key &#8216;Prefix&#8217;, specifying a prefix
string.  Only return objects matching this string.
Defaults to &#8216;/&#8217;, all objects.</p>
</div></blockquote>
<p><strong>kwargs</strong> : optional</p>
<blockquote class="last">
<div><p>Dictionary of {method:value} for <code class="docutils literal"><span class="pre">bucket.objects</span></code></p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>If you get a &#8216;PaginationError&#8217;, this means you have
a lot of items on your bucket and should increase <code class="docutils literal"><span class="pre">page_size</span></code></p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.BasicInterface.get_bucket_size">
<code class="descname">get_bucket_size</code><span class="sig-paren">(</span><em>limit=1000000</em>, <em>page_size=1000000</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.BasicInterface.get_bucket_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Counts the size of all objects in the current bucket.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>limit</strong> : int, 1000</p>
<blockquote>
<div><p>Maximum number of items to return</p>
</div></blockquote>
<p><strong>page_size</strong> : int, 1000</p>
<blockquote>
<div><p>The page size for pagination</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>total_bytes</strong> : int</p>
<blockquote class="last">
<div><p>The byte count of all objects in the bucket.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Because paging does not work properly, if there are more than
limit,page_size number of objects in the bucket, this function will
underestimate the total size. Check the printed number of objects for
suspicious round numbers.
TODO(anunez): Remove this note when the bug is fixed.</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.BasicInterface.get_object">
<code class="descname">get_object</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.BasicInterface.get_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a boto3 object. Create it if it doesn&#8217;t exist</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.BasicInterface.mpu_fileobject">
<code class="descname">mpu_fileobject</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.BasicInterface.mpu_fileobject" title="Permalink to this definition">¶</a></dt>
<dd><p>Multi-part upload for a python file-object.</p>
<p>This automatically creates a multipart upload of an object.
Useful for large objects that are loaded in memory. This avoids
having to write the file to disk and then using <code class="docutils literal"><span class="pre">upload_from_file</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
<p><strong>file_object :</strong></p>
<blockquote>
<div><p>file-like python object (e.g. StringIO, file, etc)</p>
</div></blockquote>
<p><strong>buffersize</strong> : int</p>
<blockquote>
<div><p>Byte size of the individual parts to create.
Defaults to 100MB</p>
</div></blockquote>
<p><strong>verbose</strong> : bool</p>
<blockquote>
<div><p>verbosity flag of whether to print mpu information to stdout</p>
</div></blockquote>
<p><strong>**metadata</strong> : optional</p>
<blockquote class="last">
<div><p>Metadata to store along with MPU object</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="cottoncandy.interfaces.BasicInterface.pathjoin">
<em class="property">static </em><code class="descname">pathjoin</code><span class="sig-paren">(</span><em>a</em>, <em>*p</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.BasicInterface.pathjoin" title="Permalink to this definition">¶</a></dt>
<dd><p>Join two or more pathname components, inserting SEPARATOR as needed.
If any component is an absolute path, all previous path components
will be discarded.  An empty last part will result in a path that
ends with a separator.</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.BasicInterface.set_bucket">
<code class="descname">set_bucket</code><span class="sig-paren">(</span><em>bucket_name</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.BasicInterface.set_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Bucket to use</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.BasicInterface.show_buckets">
<code class="descname">show_buckets</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.BasicInterface.show_buckets" title="Permalink to this definition">¶</a></dt>
<dd><p>Show available buckets</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.BasicInterface.show_objects">
<code class="descname">show_objects</code><span class="sig-paren">(</span><em>limit=1000</em>, <em>page_size=1000</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.BasicInterface.show_objects" title="Permalink to this definition">¶</a></dt>
<dd><p>Print objects in the current bucket</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.BasicInterface.upload_from_file">
<code class="descname">upload_from_file</code><span class="sig-paren">(</span><em>flname</em>, <em>object_name=None</em>, <em>ExtraArgs={'ACL': 'authenticated-read'}</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.BasicInterface.upload_from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Upload a file to S3.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>flname</strong> : str</p>
<blockquote>
<div><p>Absolute path of file to upload</p>
</div></blockquote>
<p><strong>object_name</strong> : str, None</p>
<blockquote>
<div><p>Name of uploaded object. If None, use
the full file name as the object name.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>response</strong> : boto3 response</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.BasicInterface.upload_json">
<code class="descname">upload_json</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.BasicInterface.upload_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Upload a dict as a JSON using <code class="docutils literal"><span class="pre">json.dumps</span></code></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
<p><strong>ddict</strong> : dict</p>
<p class="last"><strong>metadata</strong> : dict, optional</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.BasicInterface.upload_object">
<code class="descname">upload_object</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.BasicInterface.upload_object" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.BasicInterface.upload_pickle">
<code class="descname">upload_pickle</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.BasicInterface.upload_pickle" title="Permalink to this definition">¶</a></dt>
<dd><p>Upload an object using cPickle: <code class="docutils literal"><span class="pre">cPickle.dumps</span></code></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
<p class="last"><strong>data_object</strong> : object</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="defaultinterface">
<h3><a class="reference internal" href="#cottoncandy.interfaces.DefaultInterface" title="cottoncandy.interfaces.DefaultInterface"><code class="xref py py-class docutils literal"><span class="pre">DefaultInterface</span></code></a><a class="headerlink" href="#defaultinterface" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="cottoncandy.interfaces.DefaultInterface">
<em class="property">class </em><code class="descclassname">cottoncandy.interfaces.</code><code class="descname">DefaultInterface</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cottoncandy.interfaces.FileSystemInterface" title="cottoncandy.interfaces.FileSystemInterface"><code class="xref py py-class docutils literal"><span class="pre">cottoncandy.interfaces.FileSystemInterface</span></code></a>, <a class="reference internal" href="#cottoncandy.interfaces.ArrayInterface" title="cottoncandy.interfaces.ArrayInterface"><code class="xref py py-class docutils literal"><span class="pre">cottoncandy.interfaces.ArrayInterface</span></code></a>, <a class="reference internal" href="#cottoncandy.interfaces.BasicInterface" title="cottoncandy.interfaces.BasicInterface"><code class="xref py py-class docutils literal"><span class="pre">cottoncandy.interfaces.BasicInterface</span></code></a></p>
<p>Default cottoncandy interface to S3</p>
<p>This includes numpy.array and file-system-like
concepts for easy data I/O and bucket/object exploration.</p>
<p class="rubric">Methods</p>
<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.__init__" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>bucket_name</strong> : str</p>
<blockquote>
<div><p>Bucket to use</p>
</div></blockquote>
<p><strong>ACCESS_KEY</strong> : str</p>
<blockquote>
<div><p>The S3 access key</p>
</div></blockquote>
<p><strong>SECRET_KEY</strong> : str</p>
<blockquote>
<div><p>The S3 secret key</p>
</div></blockquote>
<p><strong>url</strong> : str</p>
<blockquote class="last">
<div><p>The URL for the S3 gateway</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.cloud2dataset">
<code class="descname">cloud2dataset</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.cloud2dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a dataset representation of the object branch.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_root</strong> : str</p>
<blockquote>
<div><p>The branch to create a dataset from</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>cc_dataset_object</strong> : cottoncandy.BrowserObject</p>
<blockquote class="last">
<div><p>This can be conceptualized as implementing an h5py/pytables
object with <code class="docutils literal"><span class="pre">load()</span></code> and <code class="docutils literal"><span class="pre">keys()</span></code> methods.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.cloud2dict">
<code class="descname">cloud2dict</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.cloud2dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Download all the arrays of the object branch and return a dictionary.
This is the complement to <code class="docutils literal"><span class="pre">dict2cloud</span></code></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_root</strong> : str</p>
<blockquote>
<div><p>The branch to create the dictionary from</p>
</div></blockquote>
<p><strong>verbose</strong> : bool</p>
<blockquote>
<div><p>Whether to print object_root after completion</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>datadict</strong> : dict</p>
<blockquote class="last">
<div><p>An arbitrary depth dictionary.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.connect">
<code class="descname">connect</code><span class="sig-paren">(</span><em>ACCESS_KEY=False</em>, <em>SECRET_KEY=False</em>, <em>url=None</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect to S3 using boto</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.cp">
<code class="descname">cp</code><span class="sig-paren">(</span><em>source_name</em>, <em>dest_name</em>, <em>source_bucket=None</em>, <em>dest_bucket=None</em>, <em>overwrite=False</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.cp" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy an object</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>source_name</strong> : str</p>
<blockquote>
<div><p>Name of object to be copied</p>
</div></blockquote>
<p><strong>dest_name</strong> : str</p>
<blockquote>
<div><p>Copy name</p>
</div></blockquote>
<p><strong>source_bucket</strong> : str</p>
<blockquote>
<div><p>If copying from a bucket different from the default.
Defaults to <code class="docutils literal"><span class="pre">self.bucket_name</span></code></p>
</div></blockquote>
<p><strong>dest_bucket</strong> : str</p>
<blockquote>
<div><p>If copying to a bucket different from the source bucket.
Defaults to <code class="docutils literal"><span class="pre">source_bucket</span></code></p>
</div></blockquote>
<p><strong>overwrite</strong> : bool (defaults to False)</p>
<blockquote class="last">
<div><p>Whether to overwrite the <cite>dest_name</cite> object if it already exists</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.create_bucket">
<code class="descname">create_bucket</code><span class="sig-paren">(</span><em>bucket_name</em>, <em>acl='authenticated-read'</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.create_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new bucket</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.dict2cloud">
<code class="descname">dict2cloud</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.dict2cloud" title="Permalink to this definition">¶</a></dt>
<dd><p>Upload an arbitrary depth dictionary containing arrays</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
<p><strong>array_dict</strong> : dict</p>
<blockquote>
<div><p>An arbitrary depth dictionary of arrays. This can be
conceptualized as implementing an HDF-like group</p>
</div></blockquote>
<p><strong>verbose</strong> : bool</p>
<blockquote class="last">
<div><p>Whether to print object_name after completion</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.download_dask_array">
<code class="descname">download_dask_array</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.download_dask_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Downloads a split matrix as a <code class="docutils literal"><span class="pre">dask.array.Array</span></code> object</p>
<p>This uses the stored object metadata to reconstruct the full
n-dimensional array uploaded using <code class="docutils literal"><span class="pre">upload_dask_array</span></code>.</p>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">s3_response</span> <span class="o">=</span> <span class="n">cci</span><span class="o">.</span><span class="n">upload_dask_array</span><span class="p">(</span><span class="s1">&#39;test_dim&#39;</span><span class="p">,</span> <span class="n">arr</span><span class="p">,</span> <span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dask_object</span> <span class="o">=</span> <span class="n">cci</span><span class="o">.</span><span class="n">download_dask_array</span><span class="p">(</span><span class="s1">&#39;test_dim&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dask_object</span>
<span class="go">dask.array&lt;array, shape=(100, 600, 1000), dtype=float64, chunksize=(100, 600, 100)&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dask_slice</span> <span class="o">=</span> <span class="n">dask_object</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="p">:</span><span class="mi">200</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dask_slice</span>
<span class="go">dask.array&lt;getitem..., shape=(100, 600, 1000), dtype=float64, chunksize=(100, 600, 100)&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">downloaded_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">dask_slice</span><span class="p">)</span> <span class="c1"># this downloads the array</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">downloaded_data</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(100, 600, 200)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.download_json">
<code class="descname">download_json</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.download_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Download a JSON object</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>json_data</strong> : dict</p>
<blockquote class="last">
<div><p>Dictionary representation of JSON file</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.download_npy_array">
<code class="descname">download_npy_array</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.download_npy_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Download a np.ndarray uploaded using <code class="docutils literal"><span class="pre">np.save</span></code> with <code class="docutils literal"><span class="pre">np.load</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>object_name</strong> : str</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>array</strong> : np.ndarray</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.download_object">
<code class="descname">download_object</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.download_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Download object raw data.
This simply calls the object body <code class="docutils literal"><span class="pre">read()</span></code> method.</p>
<p>object_name : str</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>byte_data</strong> : str</p>
<blockquote class="last">
<div><p>Object byte contents</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.download_pickle">
<code class="descname">download_pickle</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.download_pickle" title="Permalink to this definition">¶</a></dt>
<dd><p>Download a cPickle object</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>object_name</strong> : str</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>data_object</strong> : object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.download_raw_array">
<code class="descname">download_raw_array</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.download_raw_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Download a binary np.ndarray and return an np.ndarray object
This method downloads an array without any disk or memory overhead.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
<p><strong>buffersize</strong> : optional</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>array</strong> : np.ndarray</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>The object must have metadata containing: shape, dtype and a gzip
boolean flag. This is all automatically handled by <code class="docutils literal"><span class="pre">upload_raw_array</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.download_sparse_array">
<code class="descname">download_sparse_array</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.download_sparse_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Downloads a scipy.sparse array</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
<blockquote>
<div><p>The object name for the sparse array to be retrieved.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>arr</strong> : scipy.sparse.spmatrix</p>
<blockquote class="last">
<div><p>The array stored at the location given by object_name</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.download_to_file">
<code class="descname">download_to_file</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.download_to_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Download S3 object to a file</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
<p><strong>flname</strong> : str</p>
<blockquote class="last">
<div><p>Absolute path where the data will be downloaded on disk</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.exists_bucket">
<code class="descname">exists_bucket</code><span class="sig-paren">(</span><em>bucket_name</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.exists_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether the bucket exists</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.exists_object">
<code class="descname">exists_object</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.exists_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether object exists in bucket</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
<blockquote class="last">
<div><p>The object name</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.get_browser">
<code class="descname">get_browser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.get_browser" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an object which can be tab-completed
to browse the contents of the bucket as if it were a file-system</p>
<p>See documentation for <code class="docutils literal"><span class="pre">cottoncandy.get_browser</span></code></p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.get_bucket">
<code class="descname">get_bucket</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.get_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Get bucket boto3 object</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.get_bucket_objects">
<code class="descname">get_bucket_objects</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.get_bucket_objects" title="Permalink to this definition">¶</a></dt>
<dd><p>Get list of objects from the bucket
This is a wrapper to <code class="docutils literal"><span class="pre">self.get_bucket().bucket.objects</span></code></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>limit</strong> : int, 1000</p>
<blockquote>
<div><p>Maximum number of items to return</p>
</div></blockquote>
<p><strong>page_size</strong> : int, 1000</p>
<blockquote>
<div><p>The page size for pagination</p>
</div></blockquote>
<p><strong>filter</strong> : dict</p>
<blockquote>
<div><p>A dictionary with key &#8216;Prefix&#8217;, specifying a prefix
string.  Only return objects matching this string.
Defaults to &#8216;/&#8217;, all objects.</p>
</div></blockquote>
<p><strong>kwargs</strong> : optional</p>
<blockquote class="last">
<div><p>Dictionary of {method:value} for <code class="docutils literal"><span class="pre">bucket.objects</span></code></p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>If you get a &#8216;PaginationError&#8217;, this means you have
a lot of items on your bucket and should increase <code class="docutils literal"><span class="pre">page_size</span></code></p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.get_bucket_size">
<code class="descname">get_bucket_size</code><span class="sig-paren">(</span><em>limit=1000000</em>, <em>page_size=1000000</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.get_bucket_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Counts the size of all objects in the current bucket.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>limit</strong> : int, 1000</p>
<blockquote>
<div><p>Maximum number of items to return</p>
</div></blockquote>
<p><strong>page_size</strong> : int, 1000</p>
<blockquote>
<div><p>The page size for pagination</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>total_bytes</strong> : int</p>
<blockquote class="last">
<div><p>The byte count of all objects in the bucket.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Because paging does not work properly, if there are more than
limit,page_size number of objects in the bucket, this function will
underestimate the total size. Check the printed number of objects for
suspicious round numbers.
TODO(anunez): Remove this note when the bug is fixed.</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.get_object">
<code class="descname">get_object</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.get_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a boto3 object. Create it if it doesn&#8217;t exist</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.get_object_owner">
<code class="descname">get_object_owner</code><span class="sig-paren">(</span><em>object_name</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.get_object_owner" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.glob">
<code class="descname">glob</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.glob" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of object names in the bucket
that match the glob pattern.</p>
<p>Some gotchas</p>
<dl class="docutils">
<dt>limit: None, int, optional</dt>
<dd>The maximum number of objects to return</dd>
<dt>page_size: int, optional</dt>
<dd>This is important for buckets with loads of objects.
By default, <code class="docutils literal"><span class="pre">glob</span></code> will download a maximum of 10^6
object names and perform the search. If more objects exist,
the search might not find them and the page_size should
be increased.</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>pattern</strong> : str,</p>
<blockquote>
<div><p>A glob pattern string</p>
</div></blockquote>
<p><strong>verbose</strong> : bool, optional</p>
<blockquote>
<div><p>If True, also print object name and creation date</p>
</div></blockquote>
<p><strong>limit</strong> : None, int, optional</p>
<p><strong>page_size: int, optional</strong></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>object_names</strong> : list</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>If more than 10^6 objects, provide <code class="docutils literal"><span class="pre">page_size=10**7</span></code> kwarg.</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.ls">
<code class="descname">ls</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.ls" title="Permalink to this definition">¶</a></dt>
<dd><p>File-system like search for S3 objects</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>pattern</strong> : str</p>
<blockquote>
<div><p>A ls-style command line like query</p>
</div></blockquote>
<p><strong>page_size</strong> : int (default: 1,000)</p>
<p><strong>limit</strong> : int (default: 1,000)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>object_names</strong> : list</p>
<blockquote class="last">
<div><p>Object names that match the search pattern</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Increase <code class="docutils literal"><span class="pre">page_size</span></code> and <code class="docutils literal"><span class="pre">limit</span></code> if you have a lot of objects
otherwise, the search might not return all matching objects in store.</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.lsdir">
<code class="descname">lsdir</code><span class="sig-paren">(</span><em>path='/'</em>, <em>limit=1000</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.lsdir" title="Permalink to this definition">¶</a></dt>
<dd><p>List the contents of a &#8220;directory&#8221;</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>path</strong> : str (default: &#8220;/&#8221;)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>matches</strong> : list</p>
<blockquote class="last">
<div><p>The children of the path.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.mpu_fileobject">
<code class="descname">mpu_fileobject</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.mpu_fileobject" title="Permalink to this definition">¶</a></dt>
<dd><p>Multi-part upload for a python file-object.</p>
<p>This automatically creates a multipart upload of an object.
Useful for large objects that are loaded in memory. This avoids
having to write the file to disk and then using <code class="docutils literal"><span class="pre">upload_from_file</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
<p><strong>file_object :</strong></p>
<blockquote>
<div><p>file-like python object (e.g. StringIO, file, etc)</p>
</div></blockquote>
<p><strong>buffersize</strong> : int</p>
<blockquote>
<div><p>Byte size of the individual parts to create.
Defaults to 100MB</p>
</div></blockquote>
<p><strong>verbose</strong> : bool</p>
<blockquote>
<div><p>verbosity flag of whether to print mpu information to stdout</p>
</div></blockquote>
<p><strong>**metadata</strong> : optional</p>
<blockquote class="last">
<div><p>Metadata to store along with MPU object</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.mv">
<code class="descname">mv</code><span class="sig-paren">(</span><em>source_name</em>, <em>dest_name</em>, <em>source_bucket=None</em>, <em>dest_bucket=None</em>, <em>overwrite=False</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.mv" title="Permalink to this definition">¶</a></dt>
<dd><p>Move an object (make copy and delete old object)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>source_name</strong> : str</p>
<blockquote>
<div><p>Name of object to be moved</p>
</div></blockquote>
<p><strong>dest_name</strong> : str</p>
<blockquote>
<div><p>New object name</p>
</div></blockquote>
<p><strong>source_bucket</strong> : str</p>
<blockquote>
<div><p>If moving object from a bucket different from the default.
Defaults to <code class="docutils literal"><span class="pre">self.bucket_name</span></code></p>
</div></blockquote>
<p><strong>dest_bucket</strong> : str (defaults to None)</p>
<blockquote>
<div><p>If moving to another bucket, provide the bucket name.
Defaults to <code class="docutils literal"><span class="pre">source_bucket</span></code></p>
</div></blockquote>
<p><strong>overwrite</strong> : bool (defaults to False)</p>
<blockquote class="last">
<div><p>Whether to overwrite the <cite>dest_name</cite> object if it already exists.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.pathjoin">
<code class="descname">pathjoin</code><span class="sig-paren">(</span><em>a</em>, <em>*p</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.pathjoin" title="Permalink to this definition">¶</a></dt>
<dd><p>Join two or more pathname components, inserting SEPARATOR as needed.
If any component is an absolute path, all previous path components
will be discarded.  An empty last part will result in a path that
ends with a separator.</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.rm">
<code class="descname">rm</code><span class="sig-paren">(</span><em>object_name</em>, <em>recursive=False</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.rm" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete an object, or a subtree (&#8216;path/to/stuff&#8217;).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
<blockquote>
<div><p>The name of the object to delete. It can also
be a subtree</p>
</div></blockquote>
<p><strong>recursive</strong> : str</p>
<blockquote class="last">
<div><p>When deleting a subtree, set <code class="docutils literal"><span class="pre">recursive=True</span></code>. This is
similar in behavior to &#8216;rm -r /path/to/directory&#8217;.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.search">
<code class="descname">search</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.search" title="Permalink to this definition">¶</a></dt>
<dd><p>Print the objects matching the glob pattern</p>
<p>See <code class="docutils literal"><span class="pre">glob</span></code> documentation for details</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.set_bucket">
<code class="descname">set_bucket</code><span class="sig-paren">(</span><em>bucket_name</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.set_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Bucket to use</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.show_buckets">
<code class="descname">show_buckets</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.show_buckets" title="Permalink to this definition">¶</a></dt>
<dd><p>Show available buckets</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.show_objects">
<code class="descname">show_objects</code><span class="sig-paren">(</span><em>limit=1000</em>, <em>page_size=1000</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.show_objects" title="Permalink to this definition">¶</a></dt>
<dd><p>Print objects in the current bucket</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.upload_dask_array">
<code class="descname">upload_dask_array</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.upload_dask_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Upload an array in chunks and store the metadata to reconstruct
the complete matrix with <code class="docutils literal"><span class="pre">dask</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
<p><strong>arr</strong> : np.ndarray</p>
<p><strong>axis</strong> : int or None (default: -1)</p>
<blockquote>
<div><p>The axis along which to slice the array. If None is given,
the array is chunked into ideal isotropic voxels.
<code class="docutils literal"><span class="pre">axis=None</span></code> is WIP and atm works fine for near isotropic matrices</p>
</div></blockquote>
<p><strong>buffersize</strong> : scalar (default: 100MB)</p>
<blockquote>
<div><p>Byte size of the desired array chunks</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>response</strong> : boto3 response</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Each array chunk is uploaded as a raw np.array with the prefix &#8220;pt%04i&#8221;.
The metadata is stored as a json file <code class="docutils literal"><span class="pre">metadata.json</span></code>. For example, if
an array is uploaded with the name &#8220;my_array_name&#8221; and split into 2 parts,
the following objects are created:</p>
<ul class="simple">
<li>my_array_name/pt0000</li>
<li>my_array_name/pt0001</li>
<li>my_array_name/metadata.json</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.upload_from_file">
<code class="descname">upload_from_file</code><span class="sig-paren">(</span><em>flname</em>, <em>object_name=None</em>, <em>ExtraArgs={'ACL': 'authenticated-read'}</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.upload_from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Upload a file to S3.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>flname</strong> : str</p>
<blockquote>
<div><p>Absolute path of file to upload</p>
</div></blockquote>
<p><strong>object_name</strong> : str, None</p>
<blockquote>
<div><p>Name of uploaded object. If None, use
the full file name as the object name.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>response</strong> : boto3 response</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.upload_json">
<code class="descname">upload_json</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.upload_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Upload a dict as a JSON using <code class="docutils literal"><span class="pre">json.dumps</span></code></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
<p><strong>ddict</strong> : dict</p>
<p class="last"><strong>metadata</strong> : dict, optional</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.upload_npy_array">
<code class="descname">upload_npy_array</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.upload_npy_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Upload a np.ndarray using <code class="docutils literal"><span class="pre">np.save</span></code></p>
<p>This method creates a copy of the array in memory
before uploading since it relies on <code class="docutils literal"><span class="pre">np.save</span></code> to
get a byte representation of the array.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
<p><strong>array</strong> : numpy.ndarray</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>reponse</strong> : boto3 upload response</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#cottoncandy.interfaces.DefaultInterface.upload_raw_array" title="cottoncandy.interfaces.DefaultInterface.upload_raw_array"><code class="xref py py-func docutils literal"><span class="pre">upload_raw_array()</span></code></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.upload_object">
<code class="descname">upload_object</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.upload_object" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.upload_pickle">
<code class="descname">upload_pickle</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.upload_pickle" title="Permalink to this definition">¶</a></dt>
<dd><p>Upload an object using cPickle: <code class="docutils literal"><span class="pre">cPickle.dumps</span></code></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
<p class="last"><strong>data_object</strong> : object</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.upload_raw_array">
<code class="descname">upload_raw_array</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.upload_raw_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Upload a a binary representation of a np.ndarray</p>
<p>This method reads the array content from memory to upload.
It does not have any overhead.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
<p><strong>array</strong> : np.ndarray</p>
<p><strong>gzip</strong> : bool, optional</p>
<blockquote>
<div><p>Whether to gzip the array</p>
</div></blockquote>
<p><strong>acl</strong> : str</p>
<blockquote>
<div><p>&#8220;access control list&#8221;, specifies permissions for s3 data.
default is &#8220;authenticated-read&#8221; (authenticated users can read)</p>
</div></blockquote>
<p class="last"><strong>metadata</strong> : dict, optional</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>This method also uploads the array <code class="docutils literal"><span class="pre">dtype</span></code>, <code class="docutils literal"><span class="pre">shape</span></code>, and <code class="docutils literal"><span class="pre">gzip</span></code>
flag as metadata</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.DefaultInterface.upload_sparse_array">
<code class="descname">upload_sparse_array</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.DefaultInterface.upload_sparse_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Uploads a scipy.sparse array as a folder of array objects</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
<blockquote>
<div><p>The name of the object to be stored.</p>
</div></blockquote>
<p><strong>arr</strong> : scipy.sparse.spmatrix</p>
<blockquote class="last">
<div><p>A scipy.sparse array to be saved. If type is DOK or LIL,
it will be converted to csr before saving</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="filesysteminterface">
<h3><a class="reference internal" href="#cottoncandy.interfaces.FileSystemInterface" title="cottoncandy.interfaces.FileSystemInterface"><code class="xref py py-class docutils literal"><span class="pre">FileSystemInterface</span></code></a><a class="headerlink" href="#filesysteminterface" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="cottoncandy.interfaces.FileSystemInterface">
<em class="property">class </em><code class="descclassname">cottoncandy.interfaces.</code><code class="descname">FileSystemInterface</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.FileSystemInterface" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cottoncandy.interfaces.BasicInterface" title="cottoncandy.interfaces.BasicInterface"><code class="xref py py-class docutils literal"><span class="pre">cottoncandy.interfaces.BasicInterface</span></code></a></p>
<p>Emulate some file system functionality.</p>
<p class="rubric">Methods</p>
<dl class="method">
<dt id="cottoncandy.interfaces.FileSystemInterface.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.FileSystemInterface.__init__" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>bucket_name</strong> : str</p>
<blockquote>
<div><p>Bucket to use</p>
</div></blockquote>
<p><strong>ACCESS_KEY</strong> : str</p>
<blockquote>
<div><p>The S3 access key</p>
</div></blockquote>
<p><strong>SECRET_KEY</strong> : str</p>
<blockquote>
<div><p>The S3 secret key</p>
</div></blockquote>
<p><strong>url</strong> : str</p>
<blockquote>
<div><p>The URL for the S3 gateway</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>cci</strong> : ccio</p>
<blockquote class="last">
<div><p>Cottoncandy interface object</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.FileSystemInterface.connect">
<code class="descname">connect</code><span class="sig-paren">(</span><em>ACCESS_KEY=False</em>, <em>SECRET_KEY=False</em>, <em>url=None</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.FileSystemInterface.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect to S3 using boto</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.FileSystemInterface.cp">
<code class="descname">cp</code><span class="sig-paren">(</span><em>source_name</em>, <em>dest_name</em>, <em>source_bucket=None</em>, <em>dest_bucket=None</em>, <em>overwrite=False</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.FileSystemInterface.cp" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy an object</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>source_name</strong> : str</p>
<blockquote>
<div><p>Name of object to be copied</p>
</div></blockquote>
<p><strong>dest_name</strong> : str</p>
<blockquote>
<div><p>Copy name</p>
</div></blockquote>
<p><strong>source_bucket</strong> : str</p>
<blockquote>
<div><p>If copying from a bucket different from the default.
Defaults to <code class="docutils literal"><span class="pre">self.bucket_name</span></code></p>
</div></blockquote>
<p><strong>dest_bucket</strong> : str</p>
<blockquote>
<div><p>If copying to a bucket different from the source bucket.
Defaults to <code class="docutils literal"><span class="pre">source_bucket</span></code></p>
</div></blockquote>
<p><strong>overwrite</strong> : bool (defaults to False)</p>
<blockquote class="last">
<div><p>Whether to overwrite the <cite>dest_name</cite> object if it already exists</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.FileSystemInterface.create_bucket">
<code class="descname">create_bucket</code><span class="sig-paren">(</span><em>bucket_name</em>, <em>acl='authenticated-read'</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.FileSystemInterface.create_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new bucket</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.FileSystemInterface.download_json">
<code class="descname">download_json</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.FileSystemInterface.download_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Download a JSON object</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>json_data</strong> : dict</p>
<blockquote class="last">
<div><p>Dictionary representation of JSON file</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.FileSystemInterface.download_object">
<code class="descname">download_object</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.FileSystemInterface.download_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Download object raw data.
This simply calls the object body <code class="docutils literal"><span class="pre">read()</span></code> method.</p>
<p>object_name : str</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>byte_data</strong> : str</p>
<blockquote class="last">
<div><p>Object byte contents</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.FileSystemInterface.download_pickle">
<code class="descname">download_pickle</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.FileSystemInterface.download_pickle" title="Permalink to this definition">¶</a></dt>
<dd><p>Download a cPickle object</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>object_name</strong> : str</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>data_object</strong> : object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.FileSystemInterface.download_to_file">
<code class="descname">download_to_file</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.FileSystemInterface.download_to_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Download S3 object to a file</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
<p><strong>flname</strong> : str</p>
<blockquote class="last">
<div><p>Absolute path where the data will be downloaded on disk</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.FileSystemInterface.exists_bucket">
<code class="descname">exists_bucket</code><span class="sig-paren">(</span><em>bucket_name</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.FileSystemInterface.exists_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether the bucket exists</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.FileSystemInterface.exists_object">
<code class="descname">exists_object</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.FileSystemInterface.exists_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether object exists in bucket</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
<blockquote class="last">
<div><p>The object name</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.FileSystemInterface.get_browser">
<code class="descname">get_browser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.FileSystemInterface.get_browser" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an object which can be tab-completed
to browse the contents of the bucket as if it were a file-system</p>
<p>See documentation for <code class="docutils literal"><span class="pre">cottoncandy.get_browser</span></code></p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.FileSystemInterface.get_bucket">
<code class="descname">get_bucket</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.FileSystemInterface.get_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Get bucket boto3 object</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.FileSystemInterface.get_bucket_objects">
<code class="descname">get_bucket_objects</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.FileSystemInterface.get_bucket_objects" title="Permalink to this definition">¶</a></dt>
<dd><p>Get list of objects from the bucket
This is a wrapper to <code class="docutils literal"><span class="pre">self.get_bucket().bucket.objects</span></code></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>limit</strong> : int, 1000</p>
<blockquote>
<div><p>Maximum number of items to return</p>
</div></blockquote>
<p><strong>page_size</strong> : int, 1000</p>
<blockquote>
<div><p>The page size for pagination</p>
</div></blockquote>
<p><strong>filter</strong> : dict</p>
<blockquote>
<div><p>A dictionary with key &#8216;Prefix&#8217;, specifying a prefix
string.  Only return objects matching this string.
Defaults to &#8216;/&#8217;, all objects.</p>
</div></blockquote>
<p><strong>kwargs</strong> : optional</p>
<blockquote class="last">
<div><p>Dictionary of {method:value} for <code class="docutils literal"><span class="pre">bucket.objects</span></code></p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>If you get a &#8216;PaginationError&#8217;, this means you have
a lot of items on your bucket and should increase <code class="docutils literal"><span class="pre">page_size</span></code></p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.FileSystemInterface.get_bucket_size">
<code class="descname">get_bucket_size</code><span class="sig-paren">(</span><em>limit=1000000</em>, <em>page_size=1000000</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.FileSystemInterface.get_bucket_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Counts the size of all objects in the current bucket.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>limit</strong> : int, 1000</p>
<blockquote>
<div><p>Maximum number of items to return</p>
</div></blockquote>
<p><strong>page_size</strong> : int, 1000</p>
<blockquote>
<div><p>The page size for pagination</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>total_bytes</strong> : int</p>
<blockquote class="last">
<div><p>The byte count of all objects in the bucket.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Because paging does not work properly, if there are more than
limit,page_size number of objects in the bucket, this function will
underestimate the total size. Check the printed number of objects for
suspicious round numbers.
TODO(anunez): Remove this note when the bug is fixed.</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.FileSystemInterface.get_object">
<code class="descname">get_object</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.FileSystemInterface.get_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a boto3 object. Create it if it doesn&#8217;t exist</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.FileSystemInterface.get_object_owner">
<code class="descname">get_object_owner</code><span class="sig-paren">(</span><em>object_name</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.FileSystemInterface.get_object_owner" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.FileSystemInterface.glob">
<code class="descname">glob</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.FileSystemInterface.glob" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of object names in the bucket
that match the glob pattern.</p>
<p>Some gotchas</p>
<dl class="docutils">
<dt>limit: None, int, optional</dt>
<dd>The maximum number of objects to return</dd>
<dt>page_size: int, optional</dt>
<dd>This is important for buckets with loads of objects.
By default, <code class="docutils literal"><span class="pre">glob</span></code> will download a maximum of 10^6
object names and perform the search. If more objects exist,
the search might not find them and the page_size should
be increased.</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>pattern</strong> : str,</p>
<blockquote>
<div><p>A glob pattern string</p>
</div></blockquote>
<p><strong>verbose</strong> : bool, optional</p>
<blockquote>
<div><p>If True, also print object name and creation date</p>
</div></blockquote>
<p><strong>limit</strong> : None, int, optional</p>
<p><strong>page_size: int, optional</strong></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>object_names</strong> : list</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>If more than 10^6 objects, provide <code class="docutils literal"><span class="pre">page_size=10**7</span></code> kwarg.</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.FileSystemInterface.ls">
<code class="descname">ls</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.FileSystemInterface.ls" title="Permalink to this definition">¶</a></dt>
<dd><p>File-system like search for S3 objects</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>pattern</strong> : str</p>
<blockquote>
<div><p>A ls-style command line like query</p>
</div></blockquote>
<p><strong>page_size</strong> : int (default: 1,000)</p>
<p><strong>limit</strong> : int (default: 1,000)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>object_names</strong> : list</p>
<blockquote class="last">
<div><p>Object names that match the search pattern</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Increase <code class="docutils literal"><span class="pre">page_size</span></code> and <code class="docutils literal"><span class="pre">limit</span></code> if you have a lot of objects
otherwise, the search might not return all matching objects in store.</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.FileSystemInterface.lsdir">
<code class="descname">lsdir</code><span class="sig-paren">(</span><em>path='/'</em>, <em>limit=1000</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.FileSystemInterface.lsdir" title="Permalink to this definition">¶</a></dt>
<dd><p>List the contents of a &#8220;directory&#8221;</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>path</strong> : str (default: &#8220;/&#8221;)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>matches</strong> : list</p>
<blockquote class="last">
<div><p>The children of the path.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.FileSystemInterface.mpu_fileobject">
<code class="descname">mpu_fileobject</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.FileSystemInterface.mpu_fileobject" title="Permalink to this definition">¶</a></dt>
<dd><p>Multi-part upload for a python file-object.</p>
<p>This automatically creates a multipart upload of an object.
Useful for large objects that are loaded in memory. This avoids
having to write the file to disk and then using <code class="docutils literal"><span class="pre">upload_from_file</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
<p><strong>file_object :</strong></p>
<blockquote>
<div><p>file-like python object (e.g. StringIO, file, etc)</p>
</div></blockquote>
<p><strong>buffersize</strong> : int</p>
<blockquote>
<div><p>Byte size of the individual parts to create.
Defaults to 100MB</p>
</div></blockquote>
<p><strong>verbose</strong> : bool</p>
<blockquote>
<div><p>verbosity flag of whether to print mpu information to stdout</p>
</div></blockquote>
<p><strong>**metadata</strong> : optional</p>
<blockquote class="last">
<div><p>Metadata to store along with MPU object</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.FileSystemInterface.mv">
<code class="descname">mv</code><span class="sig-paren">(</span><em>source_name</em>, <em>dest_name</em>, <em>source_bucket=None</em>, <em>dest_bucket=None</em>, <em>overwrite=False</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.FileSystemInterface.mv" title="Permalink to this definition">¶</a></dt>
<dd><p>Move an object (make copy and delete old object)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>source_name</strong> : str</p>
<blockquote>
<div><p>Name of object to be moved</p>
</div></blockquote>
<p><strong>dest_name</strong> : str</p>
<blockquote>
<div><p>New object name</p>
</div></blockquote>
<p><strong>source_bucket</strong> : str</p>
<blockquote>
<div><p>If moving object from a bucket different from the default.
Defaults to <code class="docutils literal"><span class="pre">self.bucket_name</span></code></p>
</div></blockquote>
<p><strong>dest_bucket</strong> : str (defaults to None)</p>
<blockquote>
<div><p>If moving to another bucket, provide the bucket name.
Defaults to <code class="docutils literal"><span class="pre">source_bucket</span></code></p>
</div></blockquote>
<p><strong>overwrite</strong> : bool (defaults to False)</p>
<blockquote class="last">
<div><p>Whether to overwrite the <cite>dest_name</cite> object if it already exists.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.FileSystemInterface.pathjoin">
<code class="descname">pathjoin</code><span class="sig-paren">(</span><em>a</em>, <em>*p</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.FileSystemInterface.pathjoin" title="Permalink to this definition">¶</a></dt>
<dd><p>Join two or more pathname components, inserting SEPARATOR as needed.
If any component is an absolute path, all previous path components
will be discarded.  An empty last part will result in a path that
ends with a separator.</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.FileSystemInterface.rm">
<code class="descname">rm</code><span class="sig-paren">(</span><em>object_name</em>, <em>recursive=False</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.FileSystemInterface.rm" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete an object, or a subtree (&#8216;path/to/stuff&#8217;).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
<blockquote>
<div><p>The name of the object to delete. It can also
be a subtree</p>
</div></blockquote>
<p><strong>recursive</strong> : str</p>
<blockquote class="last">
<div><p>When deleting a subtree, set <code class="docutils literal"><span class="pre">recursive=True</span></code>. This is
similar in behavior to &#8216;rm -r /path/to/directory&#8217;.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.FileSystemInterface.search">
<code class="descname">search</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.FileSystemInterface.search" title="Permalink to this definition">¶</a></dt>
<dd><p>Print the objects matching the glob pattern</p>
<p>See <code class="docutils literal"><span class="pre">glob</span></code> documentation for details</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.FileSystemInterface.set_bucket">
<code class="descname">set_bucket</code><span class="sig-paren">(</span><em>bucket_name</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.FileSystemInterface.set_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Bucket to use</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.FileSystemInterface.show_buckets">
<code class="descname">show_buckets</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.FileSystemInterface.show_buckets" title="Permalink to this definition">¶</a></dt>
<dd><p>Show available buckets</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.FileSystemInterface.show_objects">
<code class="descname">show_objects</code><span class="sig-paren">(</span><em>limit=1000</em>, <em>page_size=1000</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.FileSystemInterface.show_objects" title="Permalink to this definition">¶</a></dt>
<dd><p>Print objects in the current bucket</p>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.FileSystemInterface.upload_from_file">
<code class="descname">upload_from_file</code><span class="sig-paren">(</span><em>flname</em>, <em>object_name=None</em>, <em>ExtraArgs={'ACL': 'authenticated-read'}</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.FileSystemInterface.upload_from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Upload a file to S3.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>flname</strong> : str</p>
<blockquote>
<div><p>Absolute path of file to upload</p>
</div></blockquote>
<p><strong>object_name</strong> : str, None</p>
<blockquote>
<div><p>Name of uploaded object. If None, use
the full file name as the object name.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>response</strong> : boto3 response</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.FileSystemInterface.upload_json">
<code class="descname">upload_json</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.FileSystemInterface.upload_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Upload a dict as a JSON using <code class="docutils literal"><span class="pre">json.dumps</span></code></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
<p><strong>ddict</strong> : dict</p>
<p class="last"><strong>metadata</strong> : dict, optional</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.FileSystemInterface.upload_object">
<code class="descname">upload_object</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.FileSystemInterface.upload_object" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cottoncandy.interfaces.FileSystemInterface.upload_pickle">
<code class="descname">upload_pickle</code><span class="sig-paren">(</span><em>object_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.FileSystemInterface.upload_pickle" title="Permalink to this definition">¶</a></dt>
<dd><p>Upload an object using cPickle: <code class="docutils literal"><span class="pre">cPickle.dumps</span></code></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_name</strong> : str</p>
<p class="last"><strong>data_object</strong> : object</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="interfaceobject">
<h3><a class="reference internal" href="#cottoncandy.interfaces.InterfaceObject" title="cottoncandy.interfaces.InterfaceObject"><code class="xref py py-class docutils literal"><span class="pre">InterfaceObject</span></code></a><a class="headerlink" href="#interfaceobject" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="cottoncandy.interfaces.InterfaceObject">
<em class="property">class </em><code class="descclassname">cottoncandy.interfaces.</code><code class="descname">InterfaceObject</code><a class="headerlink" href="#cottoncandy.interfaces.InterfaceObject" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="cottoncandy.interfaces.InterfaceObject.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cottoncandy.interfaces.InterfaceObject.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>x.__init__(...) initializes x; see help(type(x)) for signature</p>
</dd></dl>

</dd></dl>

</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright Anwar O. Nunez-Elizalde.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.<br/>
    </p>
  </div>
</footer>
  </body>
</html>